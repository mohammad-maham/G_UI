@using System.ComponentModel.DataAnnotations
@model string


@{
    var displayName = ViewData.ModelMetadata.DisplayName ?? ViewData.ModelMetadata.PropertyName;
    var propertyName = ViewData.ModelMetadata.PropertyName;
    var required = ViewData.ModelMetadata.IsRequired ? "required" : null;

    var errorMessage = string.Empty;
    var requiredAttribute = ViewData.ModelMetadata.ContainerType.GetProperty(propertyName)
        ?.GetCustomAttributes(typeof(RequiredAttribute), false)
        .FirstOrDefault() as RequiredAttribute;

    if (requiredAttribute != null)
    {
        errorMessage = requiredAttribute.ErrorMessage;
    }


    var defaultHtmlAttributesObject = new { type = "text", @class = "form-control",  required  };
    var htmlAttributesObject = ViewData["htmlAttributes"] ?? new { };
    var htmlAttributes = Html.MergeHtmlAttributes(htmlAttributesObject, defaultHtmlAttributesObject);
}



<div class="form-group">

    <label for="@propertyName">@displayName</label>      
    @Html.TextBoxFor(m => m, ViewData.TemplateInfo.FormattedModelValue.ToString(), htmlAttributes)
    @if (required != null)
    {
        <div class="invalid-feedback">
            @errorMessage
        </div>
    }
   
</div>