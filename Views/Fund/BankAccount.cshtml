@using G_APIs.Models
@using G_APIs.Models.ComponentModels
@model  WalletBankAccount

@Html.Partial("_FormTitle", new FormTitle()
{
    Icon = Html.Raw("<svg version=\"1.0\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"42px\" height=\"42px\" viewBox=\"0 0 64 64\" enable-background=\"new 0 0 64 64\" xml:space=\"preserve\" fill=\"#000000\"><g id=\"SVGRepo_bgCarrier\" stroke-width=\"0\"></g><g id=\"SVGRepo_tracerCarrier\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></g><g id=\"SVGRepo_iconCarrier\"> <g> <g> <rect x=\"18\" y=\"25\" fill=\"#506C7F\" width=\"4\" height=\"29\"></rect> <rect x=\"30\" y=\"25\" fill=\"#506C7F\" width=\"4\" height=\"29\"></rect> <rect x=\"42\" y=\"25\" fill=\"#506C7F\" width=\"4\" height=\"29\"></rect> </g> <g> <rect x=\"48\" y=\"25\" fill=\"#B4CCB9\" width=\"4\" height=\"29\"></rect> <rect x=\"24\" y=\"25\" fill=\"#B4CCB9\" width=\"4\" height=\"29\"></rect> <rect x=\"36\" y=\"25\" fill=\"#B4CCB9\" width=\"4\" height=\"29\"></rect> <rect x=\"12\" y=\"25\" fill=\"#B4CCB9\" width=\"4\" height=\"29\"></rect> </g> <g> <path fill=\"#F9EBB2\" d=\"M8,56c-1.104,0-2,0.896-2,2h52c0-1.104-0.895-2-2-2H8z\"></path> <path fill=\"#F9EBB2\" d=\"M60,60H4c-1.104,0-2,0.896-2,2h60C62,60.896,61.105,60,60,60z\"></path> </g> <path fill=\"#F9EBB2\" d=\"M4,23h56c0.893,0,1.684-0.601,1.926-1.461c0.24-0.86-0.125-1.785-0.889-2.248l-28-17 C32.725,2.1,32.365,2,32,2c-0.367,0-0.725,0.1-1.037,0.29L2.961,19.291c-0.764,0.463-1.129,1.388-0.888,2.247 C2.315,22.399,3.107,23,4,23z\"></path> <g> <path fill=\"#394240\" d=\"M60,58c0-2.209-1.791-4-4-4h-2V25h6c1.795,0,3.369-1.194,3.852-2.922c0.484-1.728-0.242-3.566-1.775-4.497 l-28-17C33.439,0.193,32.719,0,32,0s-1.438,0.193-2.076,0.581l-28,17c-1.533,0.931-2.26,2.77-1.775,4.497 C0.632,23.806,2.207,25,4,25h6v29H8c-2.209,0-4,1.791-4,4c-2.209,0-4,1.791-4,4v2h64v-2C64,59.791,62.209,58,60,58z M4,23 c-0.893,0-1.685-0.601-1.926-1.462c-0.241-0.859,0.124-1.784,0.888-2.247l28-17.001C31.275,2.1,31.635,2,32,2 c0.367,0,0.725,0.1,1.039,0.291l28,17c0.764,0.463,1.129,1.388,0.887,2.248C61.686,22.399,60.893,23,60,23H4z M52,25v29h-4V25H52z M46,25v29h-4V25H46z M40,25v29h-4V25H40z M34,25v29h-4V25H34z M28,25v29h-4V25H28z M22,25v29h-4V25H22z M16,25v29h-4V25H16z M8,56h48c1.105,0,2,0.896,2,2H6C6,56.896,6.896,56,8,56z M2,62c0-1.104,0.896-2,2-2h56c1.105,0,2,0.896,2,2H2z\"></path> <path fill=\"#394240\" d=\"M32,9c-2.762,0-5,2.238-5,5s2.238,5,5,5s5-2.238,5-5S34.762,9,32,9z M32,17c-1.656,0-3-1.343-3-3 s1.344-3,3-3c1.658,0,3,1.343,3,3S33.658,17,32,17z\"></path> </g> <circle fill=\"#F76D57\" cx=\"32\" cy=\"14\" r=\"3\"></circle> </g> </g></svg>"),
    Title = "اطلاعات بانکی  ",
    Description = " تکمیل اطلاعات بانکی برای واریز و تبادل و برداشت انواع ارز    "
})

<script src="~/Content/plugins/input-mask/jquery.inputmask.bundle.min.js"></script>
@*<script src="~/Content/plugins/input-mask/input-mask.js"></script>*@

<div class="row gold-row">
    @using (Html.Box(col: 5))
    {
        <div class="row d-block text-center">
                <p class="h6 font-weight-bold">لطفا بانک مورد نظر را انتخاب کنید.</p>
                <div id="avatars">
                    <div class="avatar avatar-xl mt-1 mr-2">
                        <img alt="avatar" src="~/Content/assets/img/bank/melat.png" class="rounded active" data-logo="melat.png" data-value="1" title="ملت">
                    </div>
                    <div class="avatar avatar-xl mt-1 mr-2" >
                        <img alt="avatar" src="~/Content/assets/img//bank/saderat.png" class="rounded" data-logo="saderat.png" data-value="2" title="صادرات">
                    </div>
                    <div class="avatar avatar-xl mt-1 mr-2">
                        <img alt="avatar" src="~/Content/assets/img//bank/melli.png" class="rounded" data-logo="melli.png" data-value="3" title="ملی">
                    </div>
                </div>
        </div>

        <form form class="bankForm" id="bankForm" action="javascript:void(0);" novalidate>

            <input type="hidden" value="1" id="bankId" name="BankId" />
            <input type="hidden" value="melat.png" id="logoPath" name="LogoPath" />

            @Html.EditorFor(x => x.BankAccountNumber, new { HtmlAttributes = new { @class = "rtl", id = "bankAccountNumber" } })
            @Html.EditorFor(x => x.Hesab, new { HtmlAttributes = new { @class = "rtl", id = "hesab", type = "number" } })
            @Html.EditorFor(x => x.Shaba, new { HtmlAttributes = new { @class = "rtl", id = "Shaba", type = "number", inputGroup = "IR" } })

            <div class="col-auto field-wrapper command-panel mt-4">
                @Html.Partial("_GoldButton", new GoldButton()
                {
                    ButtonType = GoldButtonTypes.submit,
                    Name = "btnBuy",
                    Icon = "fa fa-save fa-2x",
                    Class = "btn btn-success",
                    Text = "ذخیره",
                    OnClick = "GetBankAccounts()"
                })
                @Html.Partial("_GoldButton", new GoldButton()
                {
                    ButtonType = GoldButtonTypes.cancel,
                    Name = "btnCancel",
                    Text = "بازگشت",
                })
            </div>
        </form>

    }
    @using (Html.Box(title: "کارت های ذخیره شده", col: 7))
    {

        @Html.Action("GetBankAccounts", "Fund");
    }
</div>
<script>

    $(function () {

        GetBankAccounts();

        $('#bankAccountNumber').inputmask("9999-9999-9999-9999");

        $('.avatar img').click(function () {
            $('.avatar img').removeClass('active');
            $(this).addClass('active');

            $('#bankId').val($(this).data('value'));
            $('#logoPath').val($(this).data('logo'));
        })

    })

    function GetBankAccounts() {
        //window.location.reload();
    }

    $('#bankForm').ajaxForm({
        validation: true,
        url: '/Fund/AddBankAccount',
        jwt: false,
        blockui: true,
        mixin: true,
        success: () => {
            location.reload();
        }
    });


</script>
